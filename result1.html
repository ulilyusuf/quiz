<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=0.8">
<title>Hasil Quiz</title>
<style>
body { 
  font-family: sans-serif; 
  background: #e6ffe6; 
  padding: 20px; 
  text-align:center;
  font-size:22px; 
}
h2 { color: #007700; }
button { 
  margin: 10px; 
  padding: 10px 20px; 
  border-radius: 8px;
  font-size:20px; 
}
li { text-align: left; }
</style>
</head>
<body>

<h2>Hasil Quiz</h2>
<div id="hasil"></div>
<h3>Jawaban Salah:</h3>
<div id="salah"></div>

<button onclick="ulang()">Mulai dari awal</button>
<button onclick="keluar()">Keluar</button>
  
<script>
let total = 0;
let salahSemua = [];

for(let i=1; i<=10; i++){
  total += parseInt(localStorage.getItem('skor_sesi_'+i) || 0);
  let salah = JSON.parse(localStorage.getItem('salah_sesi_'+i) || '[]');
  salahSemua = salahSemua.concat(salah);
}

document.getElementById('hasil').innerHTML = `<p>Total Skor: ${total} / ${10*10}</p>`;
let list = salahSemua.map(s => `<li>${s.no}. ${s.soal} â†’ ${s.jawaban}</li>`).join('');
document.getElementById('salah').innerHTML = `<ul>${list}</ul>`;

function ulang(){
  localStorage.clear();
  window.location.href = "https://ulilyusuf.github.io/quiz/index.html";
}

// ðŸ”¹ Fungsi keluar khusus Kodular
function keluar(){
  // Hapus data localStorage dari browser
  localStorage.clear();
  
  // Jika dijalankan di WebView Kodular
  if (window.AndroidInterface) {
    // Memanggil fungsi Kodular untuk hapus cache + keluar
    window.AndroidInterface.clearCacheAndExit();
  } else {
    alert("Fitur keluar hanya berfungsi di dalam aplikasi.");
  }
}
</script>

</body>
</html>
