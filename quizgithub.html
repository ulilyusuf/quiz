<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .timer { font-size: 1.5rem; font-weight: bold; margin-bottom: 20px; color: red; }
  .quiz-question { margin-bottom: 15px; }
  .disabled { pointer-events: none; opacity: 0.6; }
</style>
</head>
<body>

<div class="timer" id="timer">Waktu: --:--</div>

<div id="quizContent">
  <div class="quiz-question">1. Pertanyaan contoh A</div>
  <div class="quiz-question">2. Pertanyaan contoh B</div>
  <div class="quiz-question">3. Pertanyaan contoh C</div>
  <button onclick="submitQuiz()">Kirim Jawaban</button>
</div>

<div id="result" style="display:none;">
  <h2>Waktu Habis / Quiz Selesai!</h2>
  <p>Hasil Anda ditampilkan di sini.</p>
</div>

<script>
// Ambil durasi dari localStorage (dalam menit)
let duration = parseInt(localStorage.getItem('quizTime') || 0);
if (duration <= 0) duration = 1;

// Hitung deadline
let endTime = new Date().getTime() + duration * 60 * 1000;

// Timer update per detik
let timerInterval = setInterval(() => {
    let now = new Date().getTime();
    let remaining = endTime - now;

    if (remaining <= 0) {
        clearInterval(timerInterval);
        finishQuiz();
        return;
    }

    let minutes = Math.floor(remaining / 60000);
    let seconds = Math.floor((remaining % 60000) / 1000);

    document.getElementById('timer').textContent = 
        `Waktu: ${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
}, 1000);

function submitQuiz() {
    clearInterval(timerInterval);
    finishQuiz();
}

function finishQuiz() {
    // Tampilkan hasil
    document.getElementById('quizContent').style.display = 'none';
    document.getElementById('result').style.display = 'block';

    // Tandai quiz selesai agar tidak bisa lanjut sesi lain
    localStorage.setItem('quizFinished', 'true');
}

// Cegah akses ke quiz jika sudah habis sesi sebelumnya
window.onload = function() {
    if (localStorage.getItem('quizFinished') === 'true') {
        finishQuiz();
    }
}
</script>

</body>
</html>
